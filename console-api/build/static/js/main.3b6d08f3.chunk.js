(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{102:function(e,t){},108:function(e,t){},111:function(e,t,n){var r={"./en.json":112,"./fr.json":113};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=111},112:function(e){e.exports={title:"My English Site"}},113:function(e){e.exports={title:"My French Site"}},121:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(30),c=n.n(a),i=n(27),u=n(1),s=n.n(u),l=n(10),f=n(9),d=n(5),p=n(28),h=n(3),m=n(15),g=n(14);function b(e){return v.apply(this,arguments)}function v(){return(v=Object(l.a)(s.a.mark(function e(t){var n,r,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,r=t.password,o=new m.a,e.abrupt("return",o.post(g.a,{email:n,password:r}).then(function(e){return e},function(e){throw e}));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var O=n(26),j=Object(d.f)(function(e){var t=e.history,n=e.children,a=Object(r.useState)({isAuthenticated:!1,loading:!1}),c=Object(f.a)(a,2),i=c[0],u=c[1],d=Object(r.useContext)(O.b),m=function(){var e=Object(l.a)(s.a.mark(function e(n,r){var o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u({isAuthenticated:!1,loading:!0}),e.prev=1,e.next=4,b({email:n,password:r});case 4:o=e.sent,localStorage.setItem("user",JSON.stringify(o.data)),localStorage.setItem("token",o.data.token),u({isAuthenticated:!0,loading:!1}),t.push(h.c),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),d.setError(e.t0,!0),u({isAuthenticated:!1,loading:!1});case 15:case"end":return e.stop()}},e,null,[[1,11]])}));return function(t,n){return e.apply(this,arguments)}}();return o.a.createElement(p.c,{value:{isAuthenticated:i.isAuthenticated,authenticate:m,logout:function(){localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("selectedSite"),u({isAuthenticated:!1}),t.push(h.b)},checkAuthentication:function(){return!!localStorage.getItem("user")&&!!localStorage.getItem("token")}}},n)}),w=n(37),E=n(36),y=n(56),k=n.n(y),C=n(57),x=n.n(C),S=o.a.createContext({language:"en",switchLanguage:function(){}});Object(E.b)([].concat(Object(w.a)(k.a),Object(w.a)(x.a)));var I=function(e){var t=e.children,a=Object(r.useState)("en"),c=Object(f.a)(a,2),i=c[0],u=c[1],s=Object(r.useState)({}),l=Object(f.a)(s,2),d=l[0],p=l[1];Object(r.useEffect)(function(){if(i){var e=n(111)("./".concat(i,".json"));p(e)}},[i]);return o.a.createElement(E.a,{locale:"en",messages:d},o.a.createElement(S.Provider,{value:{language:i,switchLanguage:function(e){e&&u(e)}}},t))},N=n(20),A=n(31),T=n(60),L=n(58),D=n(29),R=n(24),z=n(61),P=n(18),W={notification:{type:"",fail:!1,message:"",statusCode:""},setNotification:function(e,t){P.a.info(e,t)}},F=o.a.createContext(W),U=F.Provider,M=(F.Consumer,F),$=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(T.a)(this,Object(L.a)(t).call(this,e))).setError=n.setError.bind(Object(D.a)(n)),n.state={error:{fail:!1,message:"",statusCode:""},applicationError:!1},n}return Object(z.a)(t,e),Object(R.a)(t,null,[{key:"getDerivedStateFromError",value:function(e){return P.a.info("Derived Error",e),{applicationError:!0}}}]),Object(R.a)(t,[{key:"setError",value:function(e,t){t&&(0,this.context.setNotification)(Object(N.a)({},e,{type:"error"}),t);this.setState({error:e})}},{key:"componentDidCatch",value:function(e,t){P.a.info("CDC",e,t)}},{key:"render",value:function(){var e=this.props.children,t=this.state,n=t.error;return t.applicationError?o.a.createElement("h1",null,"Something went wrong."):o.a.createElement(O.a,{value:{error:n,setError:this.setError}},e)}}]),t}(o.a.Component);$.contextType=M;var G=$,J=n(59),B=n.n(J),H=function(e){var t=e.children,n=Object(r.createRef)(),a=Object(r.useState)({type:"error",fail:!1,message:"",statusCode:""}),c=Object(f.a)(a,2),i=c[0],u=c[1];return o.a.createElement(U,{value:{notification:i,setNotification:function(e,t){t&&n&&n.current&&n.current.addNotification({level:e.type,message:o.a.createElement("div",null,e.statusCode&&o.a.createElement("b",null,e.statusCode,": "),e.message),position:"tc"}),u(Object(N.a)({},e))}}},o.a.createElement(B.a,{ref:n}),t)},_=n(38),Y=[{Component:Object(r.lazy)(function(){return n.e(12).then(n.bind(null,420))}),path:h.b}],q=[{Component:Object(r.lazy)(function(){return Promise.all([n.e(0),n.e(1),n.e(8)]).then(n.bind(null,421))}),path:"/console/home"}],K=[{Component:Object(r.lazy)(function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(6)]).then(n.bind(null,419))}),path:"/console/site"}],Q=[{Component:Object(r.lazy)(function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(10)]).then(n.bind(null,418))}),path:"/console/cameras"}],V=[{Component:Object(r.lazy)(function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,414))}),path:"/console/explore"}],X=[{Component:Object(r.lazy)(function(){return Promise.all([n.e(0),n.e(9)]).then(n.bind(null,415))}),path:"/console/analytics"}],Z=[{Component:Object(r.lazy)(function(){return Promise.all([n.e(0),n.e(1),n.e(13),n.e(11)]).then(n.bind(null,417))}),path:"/console/admin/:type?"}],ee=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{textAlign:"center",marginTop:"20vh",textShadow:"2px 2px 0 rgb(255, 86, 0)"}},o.a.createElement("div",{style:{fontSize:"11rem",lineHeight:"1"}},"404"),o.a.createElement("div",{style:{fontSize:"4rem"}},"Not Found")),o.a.createElement("div",{style:{textAlign:"center",marginTop:"5rem"}},o.a.createElement(i.c,{className:"btn btn-info",style:{fontSize:"1.5rem"},to:"/console/home"},"Console Home")))},te=n(6),ne=function(e){var t=e.component,n=e.roles,a=Object(_.a)(e,["component","roles"]),c=Object(r.useContext)(p.a);return o.a.createElement(d.b,Object.assign({},a,{exact:!0,render:function(e){return c.checkAuthentication()&&(n.findIndex(function(e){return e===te.a.CLIENT})>-1&&Object(te.d)()||n.findIndex(function(e){return e===te.a.GOD})>-1&&Object(te.e)()||n.findIndex(function(e){return e===te.a.ADMIN})>-1&&Object(te.c)())?o.a.createElement(t,e):Object(te.e)()||Object(te.c)()?o.a.createElement(d.a,{to:"/console/admin/users"}):o.a.createElement(d.a,{to:"/"})}}))},re=function(e,t){return function(n,r){var a=n.Component;return e?o.a.createElement(ne,{exact:!0,key:r,path:n.path,component:a,roles:t}):o.a.createElement(d.b,{exact:!0,key:r,path:n.path,component:a})}},oe=function(){return o.a.createElement(r.Suspense,{fallback:"loading"},o.a.createElement(d.d,null,Y.map(re()),q.map(re(!0,[te.a.CLIENT])),K.map(re(!0,[te.a.CLIENT])),Q.map(re(!0,[te.a.CLIENT])),V.map(re(!0,[te.a.CLIENT])),X.map(re(!0,[te.a.CLIENT])),Z.map(re(!0,[te.a.GOD,te.a.ADMIN])),o.a.createElement(d.b,{component:ee})))};var ae=function(){return o.a.createElement(I,null,o.a.createElement(H,null,o.a.createElement(G,null,o.a.createElement(i.a,null,o.a.createElement(j,null,o.a.createElement(oe,null))))))},ce=(n(121),n(42)),ie=n(7);ce.b.add(ie.b,ie.f,ie.g,ie.e,ie.o,ie.h,ie.k,ie.m,ie.i,ie.n,ie.c,ie.j,ie.d,ie.a,ie.l);n(124),n(125);var ue=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function se(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(o.a.createElement(ae,null),document.getElementById("root")),function(){var e=document.getElementById("root");c.a.render(o.a.createElement(ae,null),e)}(),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");ue?(function(e,t){fetch(e).then(function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):se(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):se(t,e)})}}()},14:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"f",function(){return o}),n.d(t,"e",function(){return a}),n.d(t,"d",function(){return c}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return u});var r="auth",o="users",a="sites",c="role",i="license",u="organization"},15:function(e,t,n){"use strict";var r=n(31),o=n(24),a=n(43),c=n.n(a),i=n(20),u=n(127),s=function(e){var t,n,r=e.message;if(e.response&&e.response.data&&((t=e.response.data).code&&(n=t.code),t.errors&&t.errors.length)){var o=t.errors[0],a=o.title,c=o.description;r="".concat(a,": ").concat(c)}return{data:t&&t.errors?t.errors:t,error:e,fail:!0,message:r,statusCode:e.code||n||Object(u.a)(e,"response.status")}},l=function(e){var t=e.message;if(!e||401!==Object(u.a)(e,"status")&&403!==Object(u.a)(e,"status")&&403!==Object(u.a)(e,"response.status")||(t="You're UnAuthorized, check login or user privileges"),!e||404!==Object(u.a)(e,"status")&&404!==Object(u.a)(e,"response.status")||(t="Not Found"),e&&503===(503===Object(u.a)(e,"status")||Object(u.a)(e,"response.status"))&&(t="Internal Server Error"),e)throw e.message=t,s(e)};function f(e){return Object(i.a)({},e)}var d=n(3);n.d(t,"a",function(){return h});var p={json:"application/json",multipart:"multipart/form-data"},h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{headers:{contentType:p.json}};Object(r.a)(this,e),this.config={},this.instance=null;var n=window.localStorage.getItem("token");this.config={baseURL:t.baseURL||d.a,headers:{"x-auth-token":n||null,"Content-Type":t.headers.contentType||p.json},timeout:2e4},this.instance=c.a.create(this.config),this.instance.interceptors.response.use(f,l)}return Object(o.a)(e,[{key:"get",value:function(e,t,n){var r=e;return t&&(r+="/".concat(t)),this.instance.get(r,{params:n})}},{key:"post",value:function(e,t){return this.instance.post(e,t)}},{key:"delete",value:function(e,t){return this.instance.delete("".concat(e,"/").concat(t))}},{key:"put",value:function(e,t,n){var r=e;return n&&(r+="/".concat(n)),this.instance.put(r,t)}},{key:"patch",value:function(e,t){return this.instance.patch(e,t)}}]),e}()},18:function(e,t,n){"use strict";var r=n(9),o=n(3),a="\n  color: blue;\n  background: yellow;\n  font-weight: bold;\n  padding: 3px;\n",c="\n  color: red;\n  background: beige;\n  font-weight: bold;\n  border: 1px solid red;\n  padding: 3px;\n",i="\n  color: white;\n  background: red;\n  font-weight: bold;\n  padding: 3px;\n";function u(){var e=(new Error).stack.replace(/^Error\s+/,""),t=e.split("\n")[2],n=e.split("\n")[3];return n&&(n=n.replace(/ http.*$/,"")),t&&(t=t.replace(/ http.*$/,"")),[t=t?t.replace(/ \(.+\)$/,"").substring(6).trim():"",n=n?n.replace(/ \(.+\)$/,"").substring(6).trim():""]}var s={info:function(e){var t=u(),n=Object(r.a)(t,2),c=n[0],i=n[1];if(o.d.enabled&&("error"===o.d.loglevel||"warn"===o.d.loglevel||"info"===o.d.loglevel)){for(var s=arguments.length,l=new Array(s>1?s-1:0),f=1;f<s;f++)l[f-1]=arguments[f];l&&l.length?console.info("%c[INFO] ".concat(i,"/").concat(c),a,e,l):console.info("%c[INFO] ".concat(i,"/").concat(c),a,e)}},warn:function(e){var t=u(),n=Object(r.a)(t,2),a=n[0],i=n[1];if(o.d.enabled&&("error"===o.d.loglevel||"warn"===o.d.loglevel)){for(var s=arguments.length,l=new Array(s>1?s-1:0),f=1;f<s;f++)l[f-1]=arguments[f];l&&l.length?console.info("%c[WARN] ".concat(i,"/").concat(a),c,e,l):console.info("%c[WARN] ".concat(i,"/").concat(a),c,e)}},error:function(e){var t=u(),n=Object(r.a)(t,2),a=n[0],c=n[1];if(o.d.enabled&&"error"===o.d.loglevel){for(var s=arguments.length,l=new Array(s>1?s-1:0),f=1;f<s;f++)l[f-1]=arguments[f];l&&l.length?console.info("%c[ERROR] ".concat(c,"/").concat(a),i,e,l):console.info("%c[ERROR] ".concat(c,"/").concat(a),i,e)}}};t.a=s},26:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(0),o=n.n(r),a=n(18),c={error:{fail:!1,message:"",statusCode:""},setError:function(e,t){a.a.info(e,t)}},i=o.a.createContext(c),u=i.Provider;i.Consumer;t.b=i},28:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return i});var r=n(0),o={authenticate:function(e,t){console.log(e,t)},checkAuthentication:function(){return!0},isAuthenticated:!1,logout:function(){}},a=n.n(r).a.createContext(o),c=a.Provider,i=a.Consumer},3:function(e,t,n){"use strict";n.d(t,"e",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"d",function(){return a}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return i});var r="".concat(window.location.origin),o="".concat(r,"/api"),a={enabled:!0,loglevel:"error"},c="/console/home",i="/"},54:function(e,t){},6:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"d",function(){return l}),n.d(t,"c",function(){return f}),n.d(t,"e",function(){return d}),n.d(t,"b",function(){return p});var r=n(1),o=n.n(r),a=n(10),c=n(15),i=n(14),u={CLIENT:"client",ADMIN:"admin",GOD:"god"};function s(){var e=localStorage.getItem("user")||{};return e&&(e=JSON.parse(e)),(e.role||{}).key}var l=function(){return s()===u.CLIENT},f=function(){return s()===u.ADMIN},d=function(){return s()===u.GOD};function p(){return h.apply(this,arguments)}function h(){return(h=Object(a.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new c.a,e.abrupt("return",t.get(i.d).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}},63:function(e,t,n){e.exports=n(126)}},[[63,4,5]]]);
//# sourceMappingURL=main.3b6d08f3.chunk.js.map