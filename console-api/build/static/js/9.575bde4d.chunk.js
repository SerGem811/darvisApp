(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{131:function(e,t,a){"use strict";var n=a(0),r=a.n(n).a.createContext({sites:[],selectedSite:{},selectSite:function(){}});t.a=r},133:function(e,t,a){"use strict";var n=a(0),r=a.n(n).a.createContext({confirmationModal:{visible:!1,item:"",callback:function(){}},setConfirmationModal:function(){}});t.a=r},134:function(e,t,a){"use strict";a.d(t,"h",function(){return s}),a.d(t,"g",function(){return u}),a.d(t,"c",function(){return m}),a.d(t,"b",function(){return p}),a.d(t,"e",function(){return v}),a.d(t,"a",function(){return g}),a.d(t,"i",function(){return O}),a.d(t,"d",function(){return j}),a.d(t,"j",function(){return N}),a.d(t,"f",function(){return x});var n=a(1),r=a.n(n),c=a(10),o=a(15),i=a(14);function s(){return l.apply(this,arguments)}function l(){return(l=Object(c.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new o.a,e.abrupt("return",t.get(i.e).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function u(e){return d.apply(this,arguments)}function d(){return(d=Object(c.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new o.a,e.abrupt("return",a.get(i.e,t).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function m(e){return f.apply(this,arguments)}function f(){return(f=Object(c.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new o.a,e.abrupt("return",a.post(i.e,t).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function p(e,t){return b.apply(this,arguments)}function b(){return(b=Object(c.a)(r.a.mark(function e(t,a){var n,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new o.a({headers:{contentType:"multipart/form-data"}}),(c=new FormData).append("plan",a.plan),c.append("name",a.name),c.append("image",a.image),e.abrupt("return",n.post("".concat(i.e,"/").concat(t,"/addLevel"),c).then(function(e){return e.data},function(e){throw e}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function v(e,t){return h.apply(this,arguments)}function h(){return(h=Object(c.a)(r.a.mark(function e(t,a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new o.a,e.abrupt("return",n.delete("".concat(i.e,"/").concat(t,"/addLevel"),a).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function g(e,t,a,n,r){return E.apply(this,arguments)}function E(){return(E=Object(c.a)(r.a.mark(function e(t,a,n,c,s){var l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=new o.a,e.abrupt("return",l.post("".concat(i.e,"/").concat(t,"/addCamera"),{siteId:t,camera:a,level:n,cameraPoints:c,floorPlanPoints:s}).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(e,t,a,n,r){return y.apply(this,arguments)}function y(){return(y=Object(c.a)(r.a.mark(function e(t,a,n,c,s){var l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=new o.a,e.abrupt("return",l.put("".concat(i.e,"/").concat(t,"/addCamera"),{siteId:t,camera:a,level:n,cameraPoints:c,floorPlanPoints:s}).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function j(e,t,a){return w.apply(this,arguments)}function w(){return(w=Object(c.a)(r.a.mark(function e(t,a,n){var c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=new o.a,e.abrupt("return",c.delete("".concat(i.e,"/").concat(t,"/addCamera/").concat(a),n).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(e,t){return k.apply(this,arguments)}function k(){return(k=Object(c.a)(r.a.mark(function e(t,a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new o.a,e.abrupt("return",n.put("".concat(i.e,"/").concat(a),t).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function x(e){return S.apply(this,arguments)}function S(){return(S=Object(c.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new o.a,e.abrupt("return",a.delete(i.e,t).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}},135:function(e,t,a){"use strict";var n=a(38),r=a(0),c=a.n(r),o=a(160),i=a(161),s=a(162),l=a(128),u=a.n(l),d=a(142),m=a.n(d),f=function(e){var t=e.children,a=e.dark,r=e.className,l=e.bodyClass,d=e.actionHandler,f=e.header,p=Object(n.a)(e,["children","dark","className","bodyClass","actionHandler","header"]);return c.a.createElement(o.a,Object.assign({className:u()(m.a.card,r,a&&m.a.dark)},p),f&&c.a.createElement(i.a,{className:m.a.cardHeader},f,d),c.a.createElement(s.a,{className:l},t))};f.defaultProps={dark:!1,header:void 0,actionHandler:void 0},t.a=f},136:function(e,t,a){},137:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(5),o=a(9),i=a(395),s=a(396),l=a(397),u=a(398),d=a(399),m=a(400),f=a(401),p=a(402),b=a(403),v=a(27),h=a(28),g=(a(136),a(6)),E=a(131),O=function(){var e=r.a.useState(!1),t=Object(o.a)(e,2),a=t[0],n=t[1],c=localStorage.getItem("user")||{};c&&(c=JSON.parse(c));var O=c.role||{};return r.a.createElement("div",{className:"dar-navbar"},r.a.createElement(u.a,{className:"container",color:"faded",expand:"md"},r.a.createElement(d.a,{href:"/",className:"mr-auto"},r.a.createElement("img",{className:"dar-navbar__logo",src:"/images/logo-full.png",alt:"Darvis"})),r.a.createElement(m.a,{onClick:function(){return n(!a)}}),r.a.createElement(f.a,{isOpen:a,navbar:!0},r.a.createElement(E.a.Consumer,null,function(e){var t=e.selectedSite;return r.a.createElement(r.a.Fragment,null,t?function(e){return r.a.createElement(i.a,{className:"mr-auto",navbar:!0},Object(g.d)()&&r.a.createElement(s.a,{className:"dar-navbar__item"},r.a.createElement(v.c,{to:"/console/home",activeClassName:"link-active"},"Site")),Object(g.d)()&&e&&r.a.createElement(s.a,{className:"dar-navbar__item"},r.a.createElement(v.c,{to:"/console/site",activeClassName:"link-active"},e.name)),Object(g.d)()&&r.a.createElement(s.a,{className:"dar-navbar__item"},r.a.createElement(v.c,{to:"/console/cameras",activeClassName:"link-active"},"Cameras")),Object(g.d)()&&r.a.createElement(s.a,{className:"dar-navbar__item"},r.a.createElement(v.c,{to:"/console/explore",activeClassName:"link-active"},"Explore")),Object(g.d)()&&r.a.createElement(s.a,{className:"dar-navbar__item"},r.a.createElement(v.c,{to:"/console/analytics",activeClassName:"link-active"},"Analytics")),(Object(g.e)()||Object(g.c)())&&r.a.createElement(s.a,{className:"dar-navbar__item"},r.a.createElement(v.c,{to:"/console/admin/users",activeClassName:"link-active"},"Admin")))}(t):Object(g.d)()?r.a.createElement(i.a,{className:"mr-auto",navbar:!0},r.a.createElement(l.a,{color:"info",style:{marginBottom:"0",padding:"0.45rem 1.25rem 0.3rem"}},"Select a site to move ahead")):null)}),r.a.createElement("span",{className:"info"},"Hi \xa0",r.a.createElement("b",null,c.name,"\xa0"),r.a.createElement(p.a,{style:{padding:"5px 4px 4px 4px"},color:"dark"},O.name)),r.a.createElement(h.b,null,function(e){var t=e.logout;return r.a.createElement(b.a,{outline:!0,size:"sm",color:"dark",type:"submit",onClick:function(){return t()}},"logout")}))))},y=a(1),j=a.n(y),w=a(20),N=a(10),k=a(134),x=a(26),S=Object(c.f)(function(e){var t=e.history,a=e.children,c=Object(n.useContext)(x.b),i=JSON.parse(localStorage.getItem("selectedSite")),s=Object(n.useState)({selectedSite:i,reset:0,loading:!1}),l=Object(o.a)(s,2),u=l[0],d=l[1];return Object(n.useEffect)(function(){function e(){return(e=Object(N.a)(j.a.mark(function e(){var t;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(function(e){return Object(w.a)({},e,{loading:!0})}),e.next=4,Object(k.g)(u.selectedSite._id);case 4:t=e.sent,d(function(e){return Object(w.a)({},e,{selectedSite:t,loading:!1})}),localStorage.setItem("selectedSite",JSON.stringify(t)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),d(function(e){return Object(w.a)({},e,{loading:!1})}),c.setError(e.t0,!0);case 13:case"end":return e.stop()}},e,null,[[0,9]])}))).apply(this,arguments)}u.selectedSite?function(){e.apply(this,arguments)}():t.push("/console/home")},[t,u.reset,c,d]),r.a.createElement(E.a.Provider,{value:{loading:u.loading,selectedSite:u.selectedSite,selectSite:function(e){d({selectSite:e}),localStorage.setItem("selectedSite",JSON.stringify(e)),t.push("/console/site")},reloadSites:function(){d(Object(w.a)({},u,{reset:u.reset+1}))}}},a)}),_=a(422),C=a(404),M=a(405),P=a(406),R=a(133),H={visible:!1,item:void 0,loading:!1,callback:function(){}},T=function(e){var t=e.children,a=Object(n.useState)(H),c=Object(o.a)(a,2),i=c[0],s=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a.Provider,{value:{confirmationModal:i,setConfirmationModal:s,resetConfirmationModal:function(){return s(H)},setLoader:function(e){return s(Object(w.a)({},i,{loading:e}))}}},t),r.a.createElement(_.a,{style:{maxWidth:"250px"},isOpen:i.visible,toggle:function(){return s(Object(w.a)({},i,{visible:!i.visible}))}},r.a.createElement(C.a,null,"This will delete ",r.a.createElement("b",null,"".concat(i.item,", "))," Are you sure you want to?"),r.a.createElement(M.a,null,i.loading?r.a.createElement(P.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{color:"light",onClick:function(){return s(H)}},"No")," ",r.a.createElement(b.a,{color:"danger",onClick:function(){return i.callback()}},"Yes, Delete!!")))))};t.a=Object(c.f)(function(e){var t,a=e.match,n=e.children;return r.a.createElement(T,null,(t=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,null),r.a.createElement("div",{className:"container camera-system",style:{marginBottom:"30px"}},n))},a.path.includes("admin")?t():r.a.createElement(S,null,t())))})},142:function(e,t,a){e.exports={card:"styles_card__29RG3",dark:"styles_dark__3DC7d","online-status":"styles_online-status__R070A",cardHeader:"styles_cardHeader__10E2K"}},160:function(e,t,a){"use strict";var n=a(2),r=a(16),c=a(0),o=a.n(c),i=a(4),s=a.n(i),l=a(128),u=a.n(l),d=a(129),m={tag:d.l,inverse:s.a.bool,color:s.a.string,body:s.a.bool,outline:s.a.bool,className:s.a.string,cssModule:s.a.object,innerRef:s.a.oneOfType([s.a.object,s.a.string,s.a.func])},f=function(e){var t=e.className,a=e.cssModule,c=e.color,i=e.body,s=e.inverse,l=e.outline,m=e.tag,f=e.innerRef,p=Object(r.a)(e,["className","cssModule","color","body","inverse","outline","tag","innerRef"]),b=Object(d.h)(u()(t,"card",!!s&&"text-white",!!i&&"card-body",!!c&&(l?"border":"bg")+"-"+c),a);return o.a.createElement(m,Object(n.a)({},p,{className:b,ref:f}))};f.propTypes=m,f.defaultProps={tag:"div"},t.a=f},161:function(e,t,a){"use strict";var n=a(2),r=a(16),c=a(0),o=a.n(c),i=a(4),s=a.n(i),l=a(128),u=a.n(l),d=a(129),m={tag:d.l,className:s.a.string,cssModule:s.a.object},f=function(e){var t=e.className,a=e.cssModule,c=e.tag,i=Object(r.a)(e,["className","cssModule","tag"]),s=Object(d.h)(u()(t,"card-header"),a);return o.a.createElement(c,Object(n.a)({},i,{className:s}))};f.propTypes=m,f.defaultProps={tag:"div"},t.a=f},162:function(e,t,a){"use strict";var n=a(2),r=a(16),c=a(0),o=a.n(c),i=a(4),s=a.n(i),l=a(128),u=a.n(l),d=a(129),m={tag:d.l,className:s.a.string,cssModule:s.a.object,innerRef:s.a.oneOfType([s.a.object,s.a.string,s.a.func])},f=function(e){var t=e.className,a=e.cssModule,c=e.innerRef,i=e.tag,s=Object(r.a)(e,["className","cssModule","innerRef","tag"]),l=Object(d.h)(u()(t,"card-body"),a);return o.a.createElement(i,Object(n.a)({},s,{className:l,ref:c}))};f.propTypes=m,f.defaultProps={tag:"div"},t.a=f},415:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(407),o=a(408),i=a(137),s=a(135);t.default=function(){return r.a.createElement(i.a,null,r.a.createElement(c.a,null,r.a.createElement(o.a,null,r.a.createElement(s.a,{header:"Berlin Fairground"},"Analytics goes here"))))}}}]);
//# sourceMappingURL=9.575bde4d.chunk.js.map