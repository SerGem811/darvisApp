(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{131:function(e,t,n){"use strict";var a=n(0),r=n.n(a).a.createContext({sites:[],selectedSite:{},selectSite:function(){}});t.a=r},133:function(e,t,n){"use strict";var a=n(0),r=n.n(a).a.createContext({confirmationModal:{visible:!1,item:"",callback:function(){}},setConfirmationModal:function(){}});t.a=r},134:function(e,t,n){"use strict";n.d(t,"h",function(){return u}),n.d(t,"g",function(){return s}),n.d(t,"c",function(){return d}),n.d(t,"b",function(){return p}),n.d(t,"e",function(){return b}),n.d(t,"a",function(){return h}),n.d(t,"i",function(){return w}),n.d(t,"d",function(){return y}),n.d(t,"j",function(){return x}),n.d(t,"f",function(){return C});var a=n(1),r=n.n(a),c=n(10),i=n(15),l=n(14);function u(){return o.apply(this,arguments)}function o(){return(o=Object(c.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new i.a,e.abrupt("return",t.get(l.e).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function s(e){return m.apply(this,arguments)}function m(){return(m=Object(c.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new i.a,e.abrupt("return",n.get(l.e,t).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return(f=Object(c.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new i.a,e.abrupt("return",n.post(l.e,t).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function p(e,t){return v.apply(this,arguments)}function v(){return(v=Object(c.a)(r.a.mark(function e(t,n){var a,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new i.a({headers:{contentType:"multipart/form-data"}}),(c=new FormData).append("plan",n.plan),c.append("name",n.name),c.append("image",n.image),e.abrupt("return",a.post("".concat(l.e,"/").concat(t,"/addLevel"),c).then(function(e){return e.data},function(e){throw e}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function b(e,t){return E.apply(this,arguments)}function E(){return(E=Object(c.a)(r.a.mark(function e(t,n){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new i.a,e.abrupt("return",a.delete("".concat(l.e,"/").concat(t,"/addLevel"),n).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function h(e,t,n,a,r){return g.apply(this,arguments)}function g(){return(g=Object(c.a)(r.a.mark(function e(t,n,a,c,u){var o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=new i.a,e.abrupt("return",o.post("".concat(l.e,"/").concat(t,"/addCamera"),{siteId:t,camera:n,level:a,cameraPoints:c,floorPlanPoints:u}).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function w(e,t,n,a,r){return O.apply(this,arguments)}function O(){return(O=Object(c.a)(r.a.mark(function e(t,n,a,c,u){var o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=new i.a,e.abrupt("return",o.put("".concat(l.e,"/").concat(t,"/addCamera"),{siteId:t,camera:n,level:a,cameraPoints:c,floorPlanPoints:u}).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function y(e,t,n){return j.apply(this,arguments)}function j(){return(j=Object(c.a)(r.a.mark(function e(t,n,a){var c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=new i.a,e.abrupt("return",c.delete("".concat(l.e,"/").concat(t,"/addCamera/").concat(n),a).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function x(e,t){return k.apply(this,arguments)}function k(){return(k=Object(c.a)(r.a.mark(function e(t,n){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new i.a,e.abrupt("return",a.put("".concat(l.e,"/").concat(n),t).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function C(e){return S.apply(this,arguments)}function S(){return(S=Object(c.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new i.a,e.abrupt("return",n.delete(l.e,t).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}},135:function(e,t,n){"use strict";var a=n(38),r=n(0),c=n.n(r),i=n(160),l=n(161),u=n(162),o=n(128),s=n.n(o),m=n(142),d=n.n(m),f=function(e){var t=e.children,n=e.dark,r=e.className,o=e.bodyClass,m=e.actionHandler,f=e.header,p=Object(a.a)(e,["children","dark","className","bodyClass","actionHandler","header"]);return c.a.createElement(i.a,Object.assign({className:s()(d.a.card,r,n&&d.a.dark)},p),f&&c.a.createElement(l.a,{className:d.a.cardHeader},f,m),c.a.createElement(u.a,{className:o},t))};f.defaultProps={dark:!1,header:void 0,actionHandler:void 0},t.a=f},136:function(e,t,n){},137:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(5),i=n(9),l=n(395),u=n(396),o=n(397),s=n(398),m=n(399),d=n(400),f=n(401),p=n(402),v=n(403),b=n(27),E=n(28),h=(n(136),n(6)),g=n(131),w=function(){var e=r.a.useState(!1),t=Object(i.a)(e,2),n=t[0],a=t[1],c=localStorage.getItem("user")||{};c&&(c=JSON.parse(c));var w=c.role||{};return r.a.createElement("div",{className:"dar-navbar"},r.a.createElement(s.a,{className:"container",color:"faded",expand:"md"},r.a.createElement(m.a,{href:"/",className:"mr-auto"},r.a.createElement("img",{className:"dar-navbar__logo",src:"/images/logo-full.png",alt:"Darvis"})),r.a.createElement(d.a,{onClick:function(){return a(!n)}}),r.a.createElement(f.a,{isOpen:n,navbar:!0},r.a.createElement(g.a.Consumer,null,function(e){var t=e.selectedSite;return r.a.createElement(r.a.Fragment,null,t?function(e){return r.a.createElement(l.a,{className:"mr-auto",navbar:!0},Object(h.d)()&&r.a.createElement(u.a,{className:"dar-navbar__item"},r.a.createElement(b.c,{to:"/console/home",activeClassName:"link-active"},"Site")),Object(h.d)()&&e&&r.a.createElement(u.a,{className:"dar-navbar__item"},r.a.createElement(b.c,{to:"/console/site",activeClassName:"link-active"},e.name)),Object(h.d)()&&r.a.createElement(u.a,{className:"dar-navbar__item"},r.a.createElement(b.c,{to:"/console/cameras",activeClassName:"link-active"},"Cameras")),Object(h.d)()&&r.a.createElement(u.a,{className:"dar-navbar__item"},r.a.createElement(b.c,{to:"/console/explore",activeClassName:"link-active"},"Explore")),Object(h.d)()&&r.a.createElement(u.a,{className:"dar-navbar__item"},r.a.createElement(b.c,{to:"/console/analytics",activeClassName:"link-active"},"Analytics")),(Object(h.e)()||Object(h.c)())&&r.a.createElement(u.a,{className:"dar-navbar__item"},r.a.createElement(b.c,{to:"/console/admin/users",activeClassName:"link-active"},"Admin")))}(t):Object(h.d)()?r.a.createElement(l.a,{className:"mr-auto",navbar:!0},r.a.createElement(o.a,{color:"info",style:{marginBottom:"0",padding:"0.45rem 1.25rem 0.3rem"}},"Select a site to move ahead")):null)}),r.a.createElement("span",{className:"info"},"Hi \xa0",r.a.createElement("b",null,c.name,"\xa0"),r.a.createElement(p.a,{style:{padding:"5px 4px 4px 4px"},color:"dark"},w.name)),r.a.createElement(E.b,null,function(e){var t=e.logout;return r.a.createElement(v.a,{outline:!0,size:"sm",color:"dark",type:"submit",onClick:function(){return t()}},"logout")}))))},O=n(1),y=n.n(O),j=n(20),x=n(10),k=n(134),C=n(26),S=Object(c.f)(function(e){var t=e.history,n=e.children,c=Object(a.useContext)(C.b),l=JSON.parse(localStorage.getItem("selectedSite")),u=Object(a.useState)({selectedSite:l,reset:0,loading:!1}),o=Object(i.a)(u,2),s=o[0],m=o[1];return Object(a.useEffect)(function(){function e(){return(e=Object(x.a)(y.a.mark(function e(){var t;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(function(e){return Object(j.a)({},e,{loading:!0})}),e.next=4,Object(k.g)(s.selectedSite._id);case 4:t=e.sent,m(function(e){return Object(j.a)({},e,{selectedSite:t,loading:!1})}),localStorage.setItem("selectedSite",JSON.stringify(t)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),m(function(e){return Object(j.a)({},e,{loading:!1})}),c.setError(e.t0,!0);case 13:case"end":return e.stop()}},e,null,[[0,9]])}))).apply(this,arguments)}s.selectedSite?function(){e.apply(this,arguments)}():t.push("/console/home")},[t,s.reset,c,m]),r.a.createElement(g.a.Provider,{value:{loading:s.loading,selectedSite:s.selectedSite,selectSite:function(e){m({selectSite:e}),localStorage.setItem("selectedSite",JSON.stringify(e)),t.push("/console/site")},reloadSites:function(){m(Object(j.a)({},s,{reset:s.reset+1}))}}},n)}),_=n(422),N=n(404),L=n(405),z=n(406),A=n(133),P={visible:!1,item:void 0,loading:!1,callback:function(){}},U=function(e){var t=e.children,n=Object(a.useState)(P),c=Object(i.a)(n,2),l=c[0],u=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a.Provider,{value:{confirmationModal:l,setConfirmationModal:u,resetConfirmationModal:function(){return u(P)},setLoader:function(e){return u(Object(j.a)({},l,{loading:e}))}}},t),r.a.createElement(_.a,{style:{maxWidth:"250px"},isOpen:l.visible,toggle:function(){return u(Object(j.a)({},l,{visible:!l.visible}))}},r.a.createElement(N.a,null,"This will delete ",r.a.createElement("b",null,"".concat(l.item,", "))," Are you sure you want to?"),r.a.createElement(L.a,null,l.loading?r.a.createElement(z.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{color:"light",onClick:function(){return u(P)}},"No")," ",r.a.createElement(v.a,{color:"danger",onClick:function(){return l.callback()}},"Yes, Delete!!")))))};t.a=Object(c.f)(function(e){var t,n=e.match,a=e.children;return r.a.createElement(U,null,(t=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w,null),r.a.createElement("div",{className:"container camera-system",style:{marginBottom:"30px"}},a))},n.path.includes("admin")?t():r.a.createElement(S,null,t())))})},142:function(e,t,n){e.exports={card:"styles_card__29RG3",dark:"styles_dark__3DC7d","online-status":"styles_online-status__R070A",cardHeader:"styles_cardHeader__10E2K"}},417:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(27),i=n(5),l=n(407),u=n(408),o=n(395),s=n(396),m=n(416),d=n(137),f=n(1),p=n.n(f),v=n(20),b=n(10),E=n(9),h=n(403),g=n(422),w=n(413),O=n(135),y=n(15),j=n(14);function x(){return k.apply(this,arguments)}function k(){return(k=Object(b.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new y.a,e.abrupt("return",t.get(j.f).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function C(e){return S.apply(this,arguments)}function S(){return(S=Object(b.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new y.a,e.abrupt("return",n.post(j.f,t).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(e,t){return N.apply(this,arguments)}function N(){return(N=Object(b.a)(p.a.mark(function e(t,n){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new y.a,e.abrupt("return",a.put("".concat(j.f,"/").concat(n),t).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function L(e){return z.apply(this,arguments)}function z(){return(z=Object(b.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new y.a,e.abrupt("return",n.delete(j.f,t).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var A=n(26),P=n(254),U=n(138),M=n(133),D=n(6),B=function(e){var t=e.users,n=e.editAction,a=e.deleteUser;return t&&t.length?r.a.createElement(P.a,{borderless:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Organization"),r.a.createElement("th",null,"Role"))),r.a.createElement("tbody",null,t.map(function(e,t){return r.a.createElement("tr",{key:e._id},r.a.createElement("th",{scope:"row"},t+1),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.email),r.a.createElement("td",null,e.organization&&e.organization.name),r.a.createElement("td",{style:{textTransform:"capitalize"}},e.role&&e.role.name),r.a.createElement("td",null,function(e){return!(e.role&&e.role.name===D.a.GOD&&Object(D.c)())}(e)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{size:"sm",onClick:function(){return n(e)}},r.a.createElement(U.a,{icon:"edit"})),"\xa0"),function(e){return e.role&&e.role.name!==D.a.GOD}(e)&&function(e){return!(e.role&&e.role.name===D.a.ADMIN&&Object(D.c)())}(e)&&r.a.createElement(M.a.Consumer,null,function(t){var n=t.setConfirmationModal,c=t.resetConfirmationModal,i=t.setLoader;return r.a.createElement(h.a,{size:"sm",onClick:function(){return n(function(t){return Object(v.a)({},t,{visible:!0,item:e.name,callback:function(){i(!0),a(e._id,function(){return c()},function(){return i(!1)})}})})},color:"danger"},r.a.createElement(U.a,{icon:"trash"}))})))}))):r.a.createElement("div",null,"No users found")},q=n(156),V=n(404),H=n(406),R=n(247),F=n(409),I=n(410),J=n(411),Y=n(412),G=n(405),T=n(148),W=n(18);function K(){return Q.apply(this,arguments)}function Q(){return(Q=Object(b.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new y.a,e.abrupt("return",t.get(j.c).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function X(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(b.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new y.a,e.abrupt("return",n.post(j.c,t).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $(e,t){return ee.apply(this,arguments)}function ee(){return(ee=Object(b.a)(p.a.mark(function e(t,n){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new y.a,e.abrupt("return",a.put("".concat(j.c,"/").concat(n),t).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function te(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(b.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new y.a,e.abrupt("return",n.delete(j.c,t).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ae={password:T.string().min(8,"Password is too short - should be 8 chars minimum.").max(50,"Password is too long - should be 50 chars maximum.").required("Password is required"),confirmPassword:T.string().oneOf([T.ref("password"),null],"Passwords must match")},re={name:T.string().min(5,"Min 5 Characters!!").max(50,"Max 50 allowed").required("Name Required"),email:T.string().email("Must be a valid URL").required("Email is required"),organization:T.string().required("Please select a organization"),role:T.string().required("Please select a role")},ce=T.object().shape(re),ie=T.object().shape(Object(v.a)({},re,ae)),le=function(e){var t=e.initialValues,n=e.addUser,c=e.updateUser,i=r.a.useState(!1),o=Object(E.a)(i,2),s=o[0],m=o[1],d=Object(a.useState)({loading:!1,organizations:[],roles:[]}),f=Object(E.a)(d,2),g=f[0],w=f[1],O=r.a.useContext(A.b).setError;if(Object(a.useEffect)(function(){(function(){var e=Object(b.a)(p.a.mark(function e(){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w(function(e){return Object(v.a)({},e,{loading:!0})}),e.prev=1,e.next=4,K();case 4:return t=e.sent,e.next=7,Object(D.b)();case 7:n=e.sent,w({organizations:t,roles:n,loading:!1}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),O(e.t0,!0),w({organizations:[],roles:[],loading:!1});case 15:case"end":return e.stop()}},e,null,[[1,11]])}));return function(){return e.apply(this,arguments)}})()()},[w,O]),g.loading)return r.a.createElement(V.a,{style:{textAlign:"center "}},r.a.createElement(H.a,null),r.a.createElement("br",null),r.a.createElement("br",null),"Loading Roles/Organizations...");var y={name:t.name||"",email:t.email||"",password:"",confirmPassword:"",role:t.role?t.role._id:"",organization:t.organization?t.organization._id:""};return t._id&&(delete y.password,delete y.confirmPassword),r.a.createElement(q.c,{initialValues:y,validationSchema:t._id?ce:ie,onSubmit:function(e,a){var r=function(){a.setSubmitting(!1),m(!1)};m(!0),t._id?c(e,t._id,function(){return r()},function(){return r()}):n(e,function(){return r()},function(){return r()})}},function(e){var n=e.values,a=e.isValid,c=e.isDirty,i=e.errors,o=e.handleSubmit,m=e.handleChange,d=e.handleBlur,f=e.isSubmitting;return r.a.createElement(R.a,{onSubmit:o},r.a.createElement(V.a,null,r.a.createElement(l.a,null,r.a.createElement(u.a,null,r.a.createElement(F.a,null,r.a.createElement(I.a,{for:"name"},"Name"),r.a.createElement(J.a,{invalid:!!i.name,id:"name",tag:q.b,name:"name",onChange:m,onBlur:d,value:n.name}),r.a.createElement(q.a,{name:"name",component:"div"},function(e){return r.a.createElement(Y.a,null,e)}))),r.a.createElement(u.a,null,r.a.createElement(F.a,null,r.a.createElement(I.a,{for:"email"},"Email"),r.a.createElement(J.a,{id:"email",type:"email",invalid:!!i.email,tag:q.b,name:"email",onChange:m,onBlur:d,value:n.email}),r.a.createElement(q.a,{name:"email",component:"div"},function(e){return r.a.createElement(Y.a,null,e)})))),!t._id&&r.a.createElement(l.a,null,r.a.createElement(u.a,null,r.a.createElement(F.a,null,r.a.createElement(I.a,{for:"password"},"Password"),r.a.createElement(J.a,{id:"password",type:"password",invalid:!!i.password,tag:q.b,name:"password",onChange:m,onBlur:d,value:n.password}),r.a.createElement(q.a,{name:"password",component:"div"},function(e){return r.a.createElement(Y.a,null,e)}))),r.a.createElement(u.a,null,r.a.createElement(F.a,null,r.a.createElement(I.a,{for:"confirmPassword"},"Confirm Password"),r.a.createElement(J.a,{id:"confirmPassword",type:"confirmPassword",invalid:!!i.confirmPassword,tag:q.b,name:"confirmPassword",onChange:m,onBlur:d,value:n.confirmPassword}),r.a.createElement(q.a,{name:"confirmPassword",component:"div"},function(e){return r.a.createElement(Y.a,null,e)})))),r.a.createElement(l.a,null,r.a.createElement(u.a,null,r.a.createElement(F.a,null,r.a.createElement(I.a,{for:"role"},"Role"),r.a.createElement(J.a,{type:"select",name:"role",id:"role",invalid:!!i.role,onChange:m,onBlur:d,value:n.role},r.a.createElement("option",null,"None"),g.roles.map(function(e){return r.a.createElement("option",{key:e._id,value:e._id,disabled:e.key===D.a.GOD},e.name)})))),r.a.createElement(u.a,null,r.a.createElement(F.a,null,r.a.createElement(I.a,{for:"organization"},"Organization"),r.a.createElement(J.a,{type:"select",name:"organization",id:"organization",invalid:!!i.organization,onChange:m,onBlur:d,value:n.organization},r.a.createElement("option",null,"None"),g.organizations.map(function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.name)})))))),r.a.createElement(G.a,null,s?r.a.createElement(H.a,null):r.a.createElement(h.a,{type:"submit",color:"primary",size:"sm",disabled:f||!a||!!c},t._id?"Update":"Add"," User")))})};le.defaultProps={initialValues:{},addUser:function(e){return W.a.info(e)},updateUser:function(e){return W.a.info(e)}};var ue=le,oe=function(){var e=Object(a.useState)({users:[],reset:0,isLoading:!1}),t=Object(E.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)({visible:!1,org:void 0}),o=Object(E.a)(i,2),s=o[0],m=o[1],d=Object(a.useState)(0),f=Object(E.a)(d,2),y=f[0],j=f[1],k=Object(a.useContext)(A.b).setError;Object(a.useEffect)(function(){function e(){return(e=Object(b.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c(function(e){return Object(v.a)({},e,{isLoading:!0})}),e.prev=1,e.next=4,x();case 4:t=e.sent,c(function(e){return Object(v.a)({},e,{users:t,isLoading:!1})}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),k(e.t0,!0),c(function(e){return Object(v.a)({},e,{isLoading:!1})});case 12:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[k,y]);var S=function(){var e=Object(b.a)(p.a.mark(function e(t,n,a){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,delete t.confirmPassword,e.next=4,C(t);case 4:n&&n(),j(y+1),m({visible:!1,user:void 0}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),a&&a(e.t0),k(e.t0,!0);case 13:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t,n,a){return e.apply(this,arguments)}}(),N=function(){var e=Object(b.a)(p.a.mark(function e(t,n,a,r){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_(t,n);case 3:a&&a(),j(y+1),m({visible:!1,user:void 0}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),r&&r(e.t0),k(e.t0,!0);case 12:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,n,a,r){return e.apply(this,arguments)}}(),z=function(){var e=Object(b.a)(p.a.mark(function e(t,n,a){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L(t);case 3:n&&n(),j(y+1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a&&a(e.t0),k(e.t0,!0);case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,n,a){return e.apply(this,arguments)}}(),P=function(){return m(Object(v.a)({},s,{visible:!s.visible,user:void 0}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,null,r.a.createElement(u.a,null,r.a.createElement(O.a,{header:"Users",actionHandler:r.a.createElement(h.a,{size:"sm",color:"primary",className:"float-right",onClick:P},"Add User")},n.isLoading?r.a.createElement("span",null,"Loading..."):r.a.createElement(B,{users:n.users,editAction:function(e){m(Object(v.a)({},s,{visible:!0,user:e}))},deleteUser:z})))),r.a.createElement(g.a,{isOpen:s.visible,toggle:P,style:{maxWidth:"650px"}},r.a.createElement(w.a,{toggle:P},"Add User"),r.a.createElement(ue,{initialValues:s.user,updateUser:N,addUser:S})))},se=function(e){var t=e.orgs,n=e.editAction,a=e.deleteOrg;return t&&t.length?r.a.createElement(P.a,{borderless:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Site"),r.a.createElement("th",null,"License Name"),r.a.createElement("th",null,"Valid Till"))),r.a.createElement("tbody",null,t.map(function(e,t){return r.a.createElement("tr",{key:e._id},r.a.createElement("th",{scope:"row"},t+1),r.a.createElement("td",null,e.name),r.a.createElement("td",null,r.a.createElement("a",{href:e.site,rel:"noopener noreferrer",target:"_blank"},e.site)),r.a.createElement("td",null,e.license.name),r.a.createElement("td",null,e.license&&e.license.expiry&&new Date(e.license.expiry).toDateString()),r.a.createElement("td",null,r.a.createElement(h.a,{size:"sm",onClick:function(){return n(e)}},r.a.createElement(U.a,{icon:"edit"}))," ",r.a.createElement(M.a.Consumer,null,function(t){var n=t.setConfirmationModal,c=t.resetConfirmationModal,i=t.setLoader;return r.a.createElement(h.a,{size:"sm",onClick:function(){return n(function(t){return Object(v.a)({},t,{visible:!0,item:e.name,callback:function(){i(!0),a(e._id,function(){return c()},function(){return i(!1)})}})})},color:"danger"},r.a.createElement(U.a,{icon:"trash"}))})))}))):r.a.createElement("div",null,"No Organization found")};function me(){return de.apply(this,arguments)}function de(){return(de=Object(b.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new y.a,e.abrupt("return",t.get(j.b).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fe(e){return pe.apply(this,arguments)}function pe(){return(pe=Object(b.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new y.a,e.abrupt("return",n.post(j.b,t).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ve(e,t){return be.apply(this,arguments)}function be(){return(be=Object(b.a)(p.a.mark(function e(t,n){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new y.a,e.abrupt("return",a.put("".concat(j.b,"/").concat(n),t).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ee(e){return he.apply(this,arguments)}function he(){return(he=Object(b.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new y.a,e.abrupt("return",n.delete(j.b,t).then(function(e){return e.data},function(e){throw e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ge=T.object().shape({name:T.string().min(4,"Min 4 Characters!!").max(50,"Max 50 allowed").required("Name Required"),site:T.string().url("Must be a valid URL"),license:T.string().required("Please select a license")}),we=function(e){var t=e.initialValues,n=e.addOrg,c=e.updateOrg,i=r.a.useState(!1),l=Object(E.a)(i,2),u=l[0],o=l[1],s=Object(a.useState)({loading:!1,data:[]}),m=Object(E.a)(s,2),d=m[0],f=m[1],g=r.a.useContext(A.b).setError;return Object(a.useEffect)(function(){(function(){var e=Object(b.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f(function(e){return Object(v.a)({},e,{loading:!0})}),e.prev=1,e.next=4,me();case 4:t=e.sent,f({data:t,loading:!1}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),g(e.t0,!0),f({data:[],loading:!1});case 12:case"end":return e.stop()}},e,null,[[1,8]])}));return function(){return e.apply(this,arguments)}})()()},[f,g]),d.loading?r.a.createElement(V.a,{style:{textAlign:"center "}},r.a.createElement(H.a,null),r.a.createElement("br",null),r.a.createElement("br",null),"Loading Licenses..."):r.a.createElement(q.c,{initialValues:{name:t.name||"",site:t.site||"",license:t.license?t.license._id:""},validationSchema:ge,onSubmit:function(e,a){var r=function(){a.setSubmitting(!1),o(!1)};o(!0),t._id?c(e,t._id,function(){return r()},function(){return r()}):n(e,function(){return r()},function(){return r()})}},function(e){var n=e.values,a=e.isValid,c=e.isDirty,i=e.errors,l=e.handleSubmit,o=e.handleChange,s=e.handleBlur,m=e.isSubmitting;return r.a.createElement(R.a,{onSubmit:l},r.a.createElement(V.a,null,r.a.createElement(F.a,null,r.a.createElement(I.a,{for:"name"},"Name"),r.a.createElement(J.a,{invalid:!!i.name,id:"name",tag:q.b,name:"name",onChange:o,onBlur:s,value:n.name}),r.a.createElement(q.a,{name:"name",component:"div"},function(e){return r.a.createElement(Y.a,null,e)})),r.a.createElement(F.a,null,r.a.createElement(I.a,{for:"site"},"Site"),r.a.createElement(J.a,{id:"site",invalid:!!i.site,tag:q.b,name:"site",onChange:o,onBlur:s,value:n.site}),r.a.createElement(q.a,{name:"site",component:"div"},function(e){return r.a.createElement(Y.a,null,e)})),r.a.createElement(F.a,null,r.a.createElement(I.a,{for:"license"},"License"),r.a.createElement(J.a,{type:"select",name:"license",id:"license",invalid:!!i.license,onChange:o,onBlur:s,value:n.license},r.a.createElement("option",null,"None"),d.data.map(function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.name)})))),r.a.createElement(G.a,null,u?r.a.createElement(H.a,null):r.a.createElement(h.a,{type:"submit",color:"info",size:"sm",disabled:m||!a||!!c},t._id?"Update":"Add"," Organization")))})};we.defaultProps={initialValues:{},addOrg:function(e){return W.a.info(e)},updateOrg:function(e){return W.a.info(e)}};var Oe=we,ye=function(){var e=Object(a.useState)({orgs:[],reset:0,isLoading:!1}),t=Object(E.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)({visible:!1,org:void 0}),o=Object(E.a)(i,2),s=o[0],m=o[1],d=Object(a.useState)(0),f=Object(E.a)(d,2),y=f[0],j=f[1],x=Object(a.useContext)(A.b).setError;Object(a.useEffect)(function(){function e(){return(e=Object(b.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c(function(e){return Object(v.a)({},e,{isLoading:!0})}),e.prev=1,e.next=4,K();case 4:t=e.sent,c(function(e){return Object(v.a)({},e,{orgs:t,isLoading:!1})}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),x(e.t0,!0),c(function(e){return Object(v.a)({},e,{isLoading:!1})});case 12:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[x,y]);var k=function(){var e=Object(b.a)(p.a.mark(function e(t,n,a){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X(t);case 3:n&&n(),j(y+1),m({visible:!1,org:void 0}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),a&&a(e.t0),x(e.t0,!0);case 12:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,n,a){return e.apply(this,arguments)}}(),C=function(){var e=Object(b.a)(p.a.mark(function e(t,n,a,r){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$(t,n);case 3:a&&a(),j(y+1),m({visible:!1,org:void 0}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),r&&r(e.t0),x(e.t0,!0);case 12:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,n,a,r){return e.apply(this,arguments)}}(),S=function(){var e=Object(b.a)(p.a.mark(function e(t,n,a){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te(t);case 3:n&&n(),j(y+1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a&&a(e.t0),x(e.t0,!0);case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,n,a){return e.apply(this,arguments)}}(),_=function(){return m(Object(v.a)({},s,{visible:!s.visible,org:void 0}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,null,r.a.createElement(u.a,null,r.a.createElement(O.a,{header:"Organizations",actionHandler:r.a.createElement(h.a,{size:"sm",color:"primary",className:"float-right",onClick:_},"Add Organization")},n.isLoading?r.a.createElement("span",null,"Loading..."):r.a.createElement(se,{orgs:n.orgs,editAction:function(e){m(Object(v.a)({},s,{visible:!0,org:e}))},deleteOrg:S})))),r.a.createElement(g.a,{isOpen:s.visible,toggle:_,style:{maxWidth:"350px"}},r.a.createElement(w.a,{toggle:_},"Add Organization"),r.a.createElement(Oe,{initialValues:s.org,updateOrg:C,addOrg:k})))},je=n(402),xe=function(e){var t=e.licenses,n=e.editAction,a=e.deleteLicense;return t&&t.length?r.a.createElement(P.a,{borderless:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Allowed Users"),r.a.createElement("th",null,"Is Active"),r.a.createElement("th",null,"Created"),r.a.createElement("th",null,"Expiry"))),r.a.createElement("tbody",null,t.map(function(e,t){return r.a.createElement("tr",{key:e._id},r.a.createElement("th",{scope:"row"},t+1),r.a.createElement("td",null,e.name),r.a.createElement("td",{align:"center"},e.allowedUsers),r.a.createElement("td",null,e.isActive?r.a.createElement(je.a,{color:"primary"},"Yes"):r.a.createElement(je.a,{color:"danger"},"No")),r.a.createElement("td",null,e.created&&new Date(e.created).toDateString()),r.a.createElement("td",null,e.expiry&&new Date(e.expiry).toDateString()),r.a.createElement("td",null,r.a.createElement(h.a,{size:"sm",onClick:function(){return n(e)}},r.a.createElement(U.a,{icon:"edit"}))," ",r.a.createElement(M.a.Consumer,null,function(t){var n=t.setConfirmationModal,c=t.resetConfirmationModal,i=t.setLoader;return r.a.createElement(h.a,{size:"sm",onClick:function(){return n(function(t){return Object(v.a)({},t,{visible:!0,item:e.name,callback:function(){i(!0),a(e._id,function(){return c()},function(){return i(!1)})}})})},color:"danger"},r.a.createElement(U.a,{icon:"trash"}))})))}))):r.a.createElement("div",null,"No license found")},ke=n(392),Ce=n.n(ke),Se=function(e){return Ce()(e).format("YYYY-MM-D")},_e=T.object().shape({name:T.string().min(4,"Min 4 Characters!!").max(50,"Max 50 allowed").required("Name Required"),allowedUsers:T.number("Should be a number").required("Set allowed users"),expiry:T.date().required("Date is required")}),Ne=function(e){var t=e.initialValues,n=e.addLicense,a=e.updateLicense,c=r.a.useState(!1),i=Object(E.a)(c,2),l=i[0],u=i[1];return r.a.createElement(q.c,{initialValues:{name:t.name||"",allowedUsers:t.allowedUsers||1,isActive:t.isActive||!1,expiry:t.expiry?Se(t.expiry):Se(Ce()().add(1,"years"))},validationSchema:_e,onSubmit:function(e,r){var c=function(){r.setSubmitting(!1),u(!1)};u(!0),t._id?a(e,t._id,function(){return c()},function(){return c()}):n(e,function(){return c()},function(){return c()})}},function(e){var n=e.values,a=e.isValid,c=e.isDirty,i=e.errors,u=e.touched,o=e.handleSubmit,s=e.handleChange,m=e.handleBlur,d=e.isSubmitting;return r.a.createElement(R.a,{onSubmit:o},r.a.createElement(V.a,null,r.a.createElement(F.a,null,r.a.createElement(I.a,null,"Name"),r.a.createElement(J.a,{invalid:!!i.name,tag:q.b,name:"name",onChange:s,onBlur:m,value:n.name}),r.a.createElement(q.a,{name:"name",component:"div"},function(e){return r.a.createElement(Y.a,null,e)})),r.a.createElement(F.a,null,r.a.createElement(I.a,null,"Allowed Users"),r.a.createElement(J.a,{tag:q.b,name:"allowedUsers",type:"number",onChange:s,onBlur:m,value:n.allowedUsers}),r.a.createElement(q.a,{name:"allowedUsers",component:"div"},function(e){return r.a.createElement(Y.a,null,e)})),r.a.createElement(F.a,null,r.a.createElement(I.a,null,"Expiry Date"),r.a.createElement(J.a,{tag:q.b,name:"expiry",type:"date",onChange:s,onBlur:m,value:Se(n.expiry)}),i.expiry&&u.expiry&&i.expiry),r.a.createElement(F.a,{check:!0},r.a.createElement(I.a,{check:!0},r.a.createElement(J.a,{type:"checkbox",checked:n.isActive,onChange:s,name:"isActive",tag:q.b,value:n.isActive})," ","isActive"))),r.a.createElement(G.a,null,l?r.a.createElement(H.a,null):r.a.createElement(h.a,{type:"submit",color:"info",size:"sm",disabled:d||!a||!!c},t._id?"Update":"Add"," License")))})};Ne.defaultProps={initialValues:{},addLicense:function(e){return W.a.info(e)},updateLicense:function(e){return W.a.info(e)}};var Le=Ne,ze=function(){var e=Object(a.useState)({licenses:[],reset:0,isLoading:!1}),t=Object(E.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)({visible:!1,license:void 0}),o=Object(E.a)(i,2),s=o[0],m=o[1],d=Object(a.useState)(0),f=Object(E.a)(d,2),y=f[0],j=f[1],x=Object(a.useContext)(A.b).setError;Object(a.useEffect)(function(){function e(){return(e=Object(b.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c(function(e){return Object(v.a)({},e,{isLoading:!0})}),e.prev=1,e.next=4,me();case 4:t=e.sent,c(function(e){return Object(v.a)({},e,{licenses:t,isLoading:!1})}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),x(e.t0,!0),c(function(e){return Object(v.a)({},e,{isLoading:!1})});case 12:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[x,y]);var k=function(){var e=Object(b.a)(p.a.mark(function e(t,n,a){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe(t);case 3:n&&n(),j(y+1),m({visible:!1,license:void 0}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),a&&a(e.t0),x(e.t0,!0);case 12:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,n,a){return e.apply(this,arguments)}}(),C=function(){var e=Object(b.a)(p.a.mark(function e(t,n,a,r){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve(t,n);case 3:a&&a(),j(y+1),m({visible:!1,license:void 0}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),r&&r(e.t0),x(e.t0,!0);case 12:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,n,a,r){return e.apply(this,arguments)}}(),S=function(){var e=Object(b.a)(p.a.mark(function e(t,n,a){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ee(t);case 3:n&&n(),j(y+1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a&&a(e.t0),x(e.t0,!0);case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,n,a){return e.apply(this,arguments)}}(),_=function(){return m(Object(v.a)({},s,{visible:!s.visible,license:void 0}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,null,r.a.createElement(u.a,null,r.a.createElement(O.a,{header:"Licenses",actionHandler:r.a.createElement(h.a,{size:"sm",color:"primary",className:"float-right",onClick:_},"Add License")},n.isLoading?r.a.createElement("span",null,"Loading..."):r.a.createElement(xe,{licenses:n.licenses,editAction:function(e){m(Object(v.a)({},s,{visible:!0,license:e}))},deleteLicense:S})))),r.a.createElement(g.a,{isOpen:s.visible,toggle:_,style:{maxWidth:"350px"}},r.a.createElement(w.a,{toggle:_},"Add License"),r.a.createElement(Le,{initialValues:s.license,updateLicense:C,addLicense:k})))};t.default=Object(i.f)(function(e){var t=e.match.params;return r.a.createElement(d.a,null,r.a.createElement(l.a,null,r.a.createElement(u.a,null,r.a.createElement("div",null,r.a.createElement(o.a,{pills:!0},r.a.createElement(s.a,null,r.a.createElement(m.a,{tag:c.b,to:"/console/admin/users",active:"users"===t.type},"Users")),r.a.createElement(s.a,null,r.a.createElement(m.a,{tag:c.b,to:"/console/admin/organizations",active:"organizations"===t.type},"Organizations")),r.a.createElement(s.a,null,r.a.createElement(m.a,{tag:c.b,to:"/console/admin/licenses",active:"licenses"===t.type},"Licenses")))))),r.a.createElement("br",null),function(){switch(t.type){case"users":return r.a.createElement(oe,null);case"organizations":return r.a.createElement(ye,null);case"licenses":return r.a.createElement(ze,null);default:return null}}())})}}]);
//# sourceMappingURL=11.9d8d062e.chunk.js.map